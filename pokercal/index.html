<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker Multiplier</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap');

        :root {
            --bg-color: #0f172a;
            --card-width: 120px;
            --card-height: 180px;
            --primary-color: #3b82f6;
            --danger-color: #ef4444;
            --text-color: #f8fafc;
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, #1e293b, #0f172a);
            font-family: 'Outfit', sans-serif;
            color: var(--text-color);
            overflow-x: hidden;
            /* Prevent horizontal scroll on small screens */
            padding: 20px;
            /* Add padding for mobile */
            box-sizing: border-box;
        }

        .container {
            text-align: center;
            width: 100%;
            max-width: 900px;
            padding: 0;
        }

        h1 {
            font-weight: 700;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
        }

        .cards-stage {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 3rem;
        }

        .card {
            width: var(--card-width);
            height: var(--card-height);
            background: white;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            user-select: none;
            color: #333;
        }

        .card:hover {
            transform: translateY(-10px) rotate(2deg);
            z-index: 10;
        }

        .card.red {
            color: #e11d48;
        }

        .card.black {
            color: #1e293b;
        }

        .card-value-top,
        .card-value-bottom {
            font-size: 1.5rem;
            font-weight: 700;
            line-height: 1;
            position: absolute;
            padding: 5px;
        }

        .card-value-top {
            top: 8px;
            left: 8px;
        }

        .card-value-bottom {
            bottom: 8px;
            right: 8px;
            transform: rotate(180deg);
        }

        .card-suit-center {
            font-size: 3.5rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
        }

        .btn {
            background: var(--primary-color);
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            min-width: 280px;
            max-width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn.confirm-state {
            background: #f59e0b;
            /* Amber for warning/wait */
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }

        .btn.show-result {
            background: #10b981;
            /* Emerald for success */
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
            cursor: default;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            padding: 10px 24px;
            min-width: auto;
            font-size: 0.9rem;
        }

        .btn-secondary:hover {
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .result-display {
            font-size: 3rem;
            font-weight: 800;
            margin-top: 10px;
            min-height: 60px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
            word-break: break-all;
            /* Prevent overflow of long numbers */
        }

        .result-display.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Tablet Responsiveness */
        @media (max-width: 1024px) {
            :root {
                --card-width: 100px;
                --card-height: 150px;
            }

            .card-suit-center {
                font-size: 3rem;
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 600px) {
            :root {
                --card-width: 80px;
                /* Slightly smaller for mobile */
                --card-height: 120px;
            }

            .cards-stage {
                gap: 10px;
                margin-bottom: 2rem;
            }

            .card-value-top,
            .card-value-bottom {
                font-size: 1rem;
            }

            .card-suit-center {
                font-size: 2.5rem;
            }

            h1 {
                font-size: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .btn {
                width: 100%;
                min-width: 0;
            }

            .result-display {
                font-size: 2.5rem;
            }
        }

        /* Small Phones */
        @media (max-width: 380px) {
            :root {
                --card-width: 70px;
                --card-height: 105px;
            }

            .cards-stage {
                gap: 8px;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Poker Multiplier</h1>

        <div class="cards-stage" id="cardStage">
            <!-- Cards will be injected here -->
        </div>

        <div class="result-display" id="resultDisplay"></div>

        <div class="controls">
            <button class="btn" id="mainBtn" onclick="handleMainClick()">Show Result</button>
            <button class="btn btn-secondary" onclick="initGame()">New Cards</button>
        </div>
    </div>

    <script>
        const cardStage = document.getElementById('cardStage');
        const mainBtn = document.getElementById('mainBtn');
        const resultDisplay = document.getElementById('resultDisplay');

        const SUITS = ['♠', '♥', '♦', '♣'];
        const VALUES = [
            { id: 'A', val: 14 },
            { id: '2', val: 2 }, { id: '3', val: 3 }, { id: '4', val: 4 },
            { id: '5', val: 5 }, { id: '6', val: 6 }, { id: '7', val: 7 },
            { id: '8', val: 8 }, { id: '9', val: 9 }, { id: '10', val: 10 },
            { id: 'J', val: 11 }, { id: 'Q', val: 12 }, { id: 'K', val: 13 }
        ];

        let currentCards = [];
        let curClickStep = 0; // 0: Idle, 1: Waiting for confirm
        let clickTimeout = null;

        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        function createCard() {
            const suit = SUITS[getRandomInt(SUITS.length)];
            const valueObj = VALUES[getRandomInt(VALUES.length)];
            return {
                suit: suit,
                display: valueObj.id,
                value: valueObj.val,
                color: (suit === '♥' || suit === '♦') ? 'red' : 'black'
            };
        }

        function renderCard(card, index) {
            const div = document.createElement('div');
            div.className = `card ${card.color}`;
            // Stagger animation
            div.style.animation = `fadeIn 0.5s ease backwards ${index * 0.1}s`;

            div.innerHTML = `
                <div class="card-value-top">${card.display}</div>
                <div class="card-suit-center">${card.suit}</div>
                <div class="card-value-bottom">${card.display}</div>
            `;
            return div;
        }

        function initGame() {
            // Reset State
            currentCards = [];
            cardStage.innerHTML = '';
            resultDisplay.classList.remove('visible');
            resultDisplay.textContent = '';

            resetButtonState();

            // Generate Cards
            for (let i = 0; i < 4; i++) {
                const card = createCard();
                currentCards.push(card);
                cardStage.appendChild(renderCard(card, i));
            }
        }

        function calculateProduct() {
            return currentCards.reduce((acc, card) => acc * card.value, 1);
        }

        function resetButtonState() {
            curClickStep = 0;
            if (clickTimeout) clearTimeout(clickTimeout);
            mainBtn.className = 'btn';
            mainBtn.textContent = 'Show Result';
            mainBtn.disabled = false;
        }

        function handleMainClick() {
            if (curClickStep === 0) {
                // First Click
                curClickStep = 1;
                mainBtn.textContent = 'Tap Again to Reveal';
                mainBtn.classList.add('confirm-state');

                // Reset if not clicked again within 2 seconds
                clickTimeout = setTimeout(() => {
                    resetButtonState();
                }, 2000); // 2 seconds window
            } else if (curClickStep === 1) {
                // Second Click - Reveal logic
                if (clickTimeout) clearTimeout(clickTimeout);

                const product = calculateProduct();
                resultDisplay.textContent = product.toLocaleString();
                resultDisplay.classList.add('visible');

                mainBtn.className = 'btn show-result';
                mainBtn.textContent = 'Result Shown';
                mainBtn.disabled = true; // Prevent further clicks until new game

                curClickStep = 2; // End state
            }
        }

        // Add keyframes for animations
        const styleSheet = document.createElement("style");
        styleSheet.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(styleSheet);

        // Start game on load
        initGame();

    </script>
</body>

</html>