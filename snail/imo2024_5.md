# IMO 2024/5 解决方案笔记

**提案人：** Chu Cheuk Hei (HKG)
**来源：** §2.2 IMO 2024 Solution Notes (Evan Chen)

## 问题陈述

蜗牛 Turbo 位于一个 2024 行 2023 列的网格的顶行，想要到达底行。然而，有 2022 个隐藏的怪物，除第一行和最后一行外每行一个，且没有两个怪物在同一列。

Turbo 进行一系列尝试，从第一行到最后一行。在每次尝试中，他选择从第一行的任意单元格开始，然后重复移动到一个正交相邻的邻居（即上、下、左、右）。（他被允许返回到先前访问过的单元格。）如果 Turbo 到达一个有怪物的单元格，他的尝试结束，并被传送回第一行开始新的尝试。怪物在尝试之间不移动，Turbo 记得他访问过的每个单元格是否有怪物。如果他到达最后一行的任何单元格，他的尝试结束，Turbo 获胜。

求最小的整数 $n$，使得 Turbo 有一种策略，无论怪物如何放置，都能保证在最多 $n$ 次尝试内到达底行。

---

## 解答

令人惊讶的是，对于任何 $s \geq 4$ 的 $s \times (s - 1)$ 网格大小，答案都是 **$n = 3$**。我们将在该一般性下证明这一点。

### ¶ 证明至少需要三次尝试

当 Turbo 第一次移动到第二行时，Turbo 可能会立即遇到怪物 $M_1$。然后在下一次尝试中，Turbo 必须在与 $M_1$ 不同的列进入第三行，并且这样做后可能会再次遇到怪物 $M_2$。这意味着没有策略可以保证少于三次尝试。

### ¶ 三次尝试的策略

在第一次尝试中，我们让 Turbo 走遍整个第二行，直到他在其中找到怪物 $M_1$。然后我们有两种可能的情况。

#### 情况：$M_1$ 不在边缘
在第一种情况下，如果那个怪物 $M_1$ 不在行的边缘，那么 Turbo 可以追踪它下面的两条路径（原文图示显示从 $M_1$ 两侧绕行的路径）。这些路径中至少有一条是可行的，因此三次尝试就足够了。

#### 情况：$M_1$ 在边缘
不妨设 $M_1$ 在最左边的单元格。然后 Turbo 遵循绿色阶梯模式（原文图示显示像楼梯一样向右下方延伸的路径）。如果阶梯上没有怪物，那么 Turbo 在第二次尝试中获胜。否则，如果在阶梯上遇到了怪物 $M_2$，Turbo 已经找到了一条在 $M_2$ 左侧的安全路径；然后 Turbo 可以利用这条路径到达 $M_1$ 所在的列，并从那里逃脱。这在中间和右边的图中以紫色显示（根据遇到 $M_2$ 时是向东还是向南，有两种略微不同的情况）。

因此，如所承诺的那样，问题在三次尝试中得到解决。

### ¶ 扩展评论：所有有效的策略看起来都类似于此

据我们所知，所有有效的策略都是上述策略的变体。事实上，我们将尝试描述可能策略的空间，尽管这需要一点符号。

**定义：** 为简单起见，我们在下面的图中仅使用偶数 $s$。我们将 **快乐三角形 (happy triangle)** 定义为以下单元格：
*   第一行中的所有 $s - 1$ 个单元格（没有怪物）。
*   第二行中间的 $s - 3$ 个单元格。
*   第三行中间的 $s - 5$ 个单元格。
*   ...
*   第 $\frac{s}{2}$ 行的中心单元格。

对于 $s = 12$，快乐三角形是原文图中粗边框中的阴影区域。

**定义：** 给定一个单元格，定义 **肩膀 (shoulder)** 为其西北或东北方向直接相邻的单元格。因此，除了第一列和最后一列之外的单元格有两个肩膀，否则只有一个肩膀。

那么解决方案大致必须区分以下两种情况：

*   **在快乐三角形内：** 如果第一个怪物 $M_1$ 在 *快乐三角形* 内被发现，并且 Turbo 找到了一条通往两个肩膀（在图中标记为 ★）的安全路径，那么通过考虑从 ★ 出发切入怪物 $M_1$ 下方的两条路径，可以在两步内完成；其中一条必须可行。这稍微推广了上述解决方案中较简单的情况（仅关注 $M_1$ 在第一行的情况）。

*   **在快乐三角形外：** 现在假设第一个怪物 $M_1$ 在 *快乐三角形* 之外。在两个肩膀中，取更靠近中心的一个（如果在中心列，任一个都行；如果只有一个肩膀，就用它）。如果有一条通往该肩膀的安全路径，那么可以采取阶梯模式向中心移动，如图所示。在这种情况下，肩膀和位置的选择保证了阶梯到达底行，因此如果这条路径上没有怪物，算法结束。否则，如果在阶梯上遇到第二个怪物，那么可以利用第三次尝试切入怪物 $M_1$ 下方。

我们现在证明以下命题：在 Turbo 的任何有效策略中，在 Turbo 离开快乐三角形时首次遇到怪物的情况下，第二条路径 *必须* 勾勒出相同的阶梯形状。

怪物预先承诺选择它们的模式为 *要么* 西北-东南对角线，*要么* 东北-西南对角线，中间有一个单列间隙；参见原文图示。请注意，这迫使 Turbo 的任何有效路径都必须通过该特定间隙。

我们可以不失一般性地假设，当 Turbo 首次离开快乐三角形时遇到了怪物 $M_1$，并且这迫使出现西北-东南配置。

那么以下是正确的：

**命题：** Turbo 在第二条路径上的策略 *必须* 按照从上到下的顺序访问“稍微凸起的对角线”中标记为 ♣ 的每个单元格，直到遇到第二个怪物 $M_2$（或到达底行并无论如何获胜）。Turbo 访问这条对角线上方的其他单元格既可以也无关紧要，但标记的单元格必须按该顺序从上到下访问。

*证明：* 如果 Turbo 试图通过访问 $M_1$ 东南方的单元格（在图中标记为 X）来回避，那么 Turbo 显然无法在此之后完成（对于足够大的 $s$）。同时，假设 Turbo 试图“跳过”其中一个 ♣，比如在第 $C$ 列，那么间隙同样可能在 $C$ 左侧的列中。这证明了该命题。 □

**备注（安全单元格的记忆很重要，不仅仅是怪物单元格）：** 这里有一个可以由此推导出的额外观察结果。我们称一组已揭示的怪物 $\mathcal{S}$ 为 *明显可赢的*，如果仅基于怪物的位置（而不是用于获取它们的移动或算法），人们可以仅使用 $\mathcal{S}$ 确定 Turbo 的必胜路径。例如，相邻列中的两个怪物不是对角相邻的，就是明显可赢的。

那么没有策略可以保证在 2 步内获得一组明显可赢的集合（甚至对于任何常数 $k$，如果 $s$ 相对于 $k$ 足够大，则在 $k$ 步内也不行）。因此，任何有效的策略必须 *也* 使用已识别安全单元格的 *记忆*，这些记忆不仅仅来自已揭示的怪物位置。
