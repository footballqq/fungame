# 球盒模型演示系统 (Balls into Boxes Demo) 核心需求与提示词总结

## 1. 核心功能场景 (Four Combinatorial Cases)
实现组合数学中的四种经典放球模型：
- **II (Identical/Identical)**: 相同球，相同盒 (整数分拆)。
- **DI (Distinct/Identical)**: 不同球，相同盒 (第二类斯特林数)。
- **ID (Identical/Distinct)**: 相同球，不同盒 (隔板法/组合数)。
- **DD (Distinct/Distinct)**: 不同球，不同盒 (指数模型 m^n)。

## 2. 核心交互要求
- **矩阵联动**: 提供 10x10 (移动端 7x7) 的 f(n, m) 矩阵。点击单元格 (i, j) 时，需高亮显示其所有数学依赖项。
- **双公式切换**:
    - **II/DI 模式**: 支持“恰好 m 盒 (Exactly m)”与“至多 m 盒 (At most m/允许空盒)”两种逻辑的切换。
    - **联动显示**: 在“至多”模式下，矩阵大数字显示总和，右上角小字需显示“恰好”的具体分量值。
    - **斜线演示**: 在 II 模式的累加视角下，需在矩阵中呈现对角斜线高亮。
- **动态解释**: 原理解说需包含深度推导过程，并动态替换文本中的 {n}, {m}, {res} 为当前选中的数值。
- **可视化**: 使用 Canvas 实时绘制球放入盒子的随机示例，点击可切换。

## 3. 设计与技术规格
- **美学设计**: 高端暗色主题，玻璃拟态 (Glassmorphism) 卡片，霓虹点缀颜色。
- **技术栈**: Vanilla JavaScript (ES Modules), Vite, CSS3.
- **多端适配**: 
    - PC 端支持 10x10 矩阵，双列布局。
    - 移动端/Pad 端自动切换为单列，矩阵限制为 7x7，控件堆叠。
- **零配置部署**: 支持相对路径 (`base: './'`)，可直接在静态服务器或子目录下运行。

## 4. 关键公式逻辑总结 (推理内核)
- **DD**: f(n,m) = m * f(n-1, m)
- **ID**: f(n,m) = f(n, m-1) [第1盒空] + f(n-1, m) [第1盒非空]
- **DI**: S(n,m) = m*S(n-1,m) + S(n-1, m-1)
- **II**: f(n,m) = f(n, m-1) [有空盒] + f(n-m, m) [无空盒]
