<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五洞抓狐狸 🦊</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
</head>

<body>
    <div class="game-container">
        <header>
            <h1>🦊 五洞抓狐狸</h1>
            <p>小狐狸每天晚上会跳到相邻的洞口，你能抓住它吗？</p>
        </header>

        <div class="controls">
            <div class="difficulty-toggle">
                <button id="mode-easy" class="btn mode-btn active">简单</button>
                <button id="mode-hard" class="btn mode-btn">困难</button>
            </div>
            <button id="strategy-btn" class="btn secondary" style="background-color: #9b59b6;">💡 攻略</button>
            <button id="restart-btn" class="btn secondary">重置游戏</button>
        </div>

        <div class="status-bar">
            <div id="day-display">第 <span id="day-count">1</span> 天</div>
            <div id="message">请选择一个洞口检查...</div>
        </div>

        <div class="scene">
            <div class="holes-container" id="holes-container">
                <!-- Holes generated by JS -->
            </div>
        </div>

        <div id="replay-controls" class="hidden">
            <h3>🎮 游戏回放</h3>
            <div class="playback-bar">
                <button id="prev-step" disabled>◀ 上一步</button>
                <span id="step-info">0 / 0</span>
                <button id="next-step" disabled>下一步 ▶</button>
            </div>
            <div class="result-actions">
                <button id="auto-play" class="btn primary">▶ 自动播放</button>
                <button id="share-btn" class="btn secondary">📤 分享战绩</button>
                <button id="restart-end-btn" class="btn primary">🔄 再玩一次</button>
            </div>
        </div>

        <div id="log-container">
            <div class="log-header">
                <h3>📜 抓捕记录</h3>
                <button id="copy-debug-btn" class="btn small-btn hidden" title="复制调试信息">📋 复制记录</button>
            </div>
            <ul id="game-log"></ul>
        </div>
    </div>

    <!-- Intro Modal -->
    <div id="intro-modal" class="modal">
        <div class="modal-content">
            <h2>🦊 五洞抓狐狸</h2>
            <div class="intro-body">
                <p><strong>游戏规则：</strong></p>
                <ol>
                    <li>山上有 <strong>5个洞口</strong>，小狐狸躲在其中一个。</li>
                    <li>你每天只能检查 <strong>1个洞口</strong>。</li>
                    <li>如果没抓到，天黑后狐狸会跳到 <strong>相邻</strong> 的洞口。</li>
                    <li>看看你需要几天才能抓到它！</li>
                </ol>
                <div class="difficulty-hint">
                    <p>🔥 <strong>简单模式</strong>：狐狸随机跳。</p>
                    <p>😈 <strong>困难模式</strong>：狐狸很狡猾，可能会利用你的思维盲区！</p>
                </div>
            </div>
            <button id="start-game-btn" class="btn primary big-btn">开始抓捕！</button>
        </div>
    </div>

    <!-- Strategy Modal -->
    <div id="strategy-modal" class="modal hidden">
        <div class="modal-content">
            <h2>📚 必胜攻略</h2>
            <div class="intro-body">
                <p>利用<strong>奇偶性分析</strong>，可以在6天内必抓狐狸。</p>
                <p class="highlight-text"><strong>必胜口诀：2, 3, 4, 2, 3, 4</strong></p>
                <hr style="border: 0; border-top: 1px dashed #ccc; margin: 10px 0;">
                <p><strong>原理解析：</strong></p>
                <ol>
                    <li><strong>前3天 (2, 3, 4洞口)</strong>：
                        <br>先抓捕 <strong>偶数位</strong> 起始的狐狸。
                        <br>如果狐狸起始在偶数 (2,4)，则第1-3天必被抓。。
                        <br> 选2以后没狐狸，则狐狸下一次或者3，或者5，先选3，
                        <br> 如果没有狐狸，则狐狸在5，那下一步狐狸必去4.
                    </li>
                    <li><strong>后3天</strong>：
                        <br>如果前3天没抓到，说明狐狸是 <strong>奇数位</strong> (1,3,5) 起始。
                        <br><strong>关键点</strong>：经过2晚移动 (奇→偶→奇)，第4天狐狸 <strong>必然在偶数位</strong>。
                        <br>所以第4天必须从 <strong>偶数位</strong> 开始查，
                        <br>如果没抓到，重复说明去了奇数位，按照奇数方法即可必胜！
                    </li>
                </ol>

            </div>
            <button id="close-strategy-btn" class="btn secondary big-btn">学会了！</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>